{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/img/bi_x-octagon.svg","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nasync function fetchServer(searchText, pageNumber, perPage) {\n  const BASE_URL = 'https://pixabay.com';\n  const END_POINT = '/api/';\n  const API_KEY = '42307570-a64cb029cc8427df0f0b3ddcd';\n  const url = `${BASE_URL}${END_POINT}`;\n  const params = {\n    key: API_KEY,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    q: searchText,\n    per_page: perPage,\n    page: pageNumber,\n  };\n  const res = await axios.get(url, { params });\n  return res.data;\n}\n\nexport default fetchServer;\n","export default \"__VITE_ASSET__3108d0c6__\"","// Описаний у документації\nimport SimpleLightbox from 'simplelightbox';\n// Додатковий імпорт стилів\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst renderFunctions = {\n  \n  renderMarkup(elements) {\n    const markup = elements\n      .map(image => {\n        const {\n          webformatURL,\n          largeImageURL,\n          tags,\n          likes,\n          views,\n          comments,\n          downloads,\n        } = image;\n        return `<li class=\"gallery-item\">\n<a class=\"gallery-link\" href=${largeImageURL}>\n<img class=\"gallery-image\" src=${webformatURL} alt=\"${tags}\" />\n</a><div class=\"options-div\"><div class=\"item-div\"><h4 class=\"item-div-name\">Likes</h4>\n  <p class=\"item-div-text\">${likes}</p></div><div class=\"item-div\"><h4 class=\"item-div-name\">Views</h4>\n  <p class=\"item-div-text\">${views}</p></div><div class=\"item-div\"><h4 class=\"item-div-name\">Comments</h4>\n  <p class=\"item-div-text\">${comments}</p></div><div class=\"item-div\"><h4 class=\"item-div-name\">Downloads</h4>\n  <p class=\"item-div-text\">${downloads}</p></div></div>\n</li>`;\n      })\n      .join('');\n\n    document.querySelector('.gallery').insertAdjacentHTML('beforeend', markup);\n\n    var lightbox = new SimpleLightbox('.gallery a', {\n      captionPosition: 'bottom',\n      captionsData: 'alt',\n      className: 'modal',\n      /* options */\n    });\n    lightbox.refresh();\n  },\n\n  removeMarkup() {\n    document.querySelector('.gallery').innerHTML = '';\n  },\n\n  setLoader() {\n    document\n      .querySelector('.load-button')\n      .insertAdjacentHTML('afterend', `<span class=\"loader\"></span>`);\n  },\n\n  removeLoader() {\n    document.querySelector('.loader').remove();\n  },\n\n  loadButtonStatus(pageNumber, maxPage) {\n    if (pageNumber < maxPage) {\n      document.querySelector('.load-button').classList.remove('hidden');\n    } else {\n      document.querySelector('.load-button').classList.add('hidden');\n    }\n  },\n\n  hideLoadButton() {\n    document.querySelector('.load-button').classList.add('hidden');\n  },\n};\n\nexport default renderFunctions;\n","// Описаний у документації\nimport iziToast from 'izitoast';\n// Додатковий імпорт стилів\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport fetchServer from './js/pixabay-api';\n\nimport svgError from '/img/bi_x-octagon.svg';\n\nimport renderFunctions from './js/render-functions';\n\nlet searchText;\nlet pageNumber;\nlet maxPage;\nconst perPage = 15;\nconst formSubmit = document.querySelector('.form');\nformSubmit.addEventListener('submit', onSubmit);\nconst LoadButton = document.querySelector('.load-button');\nLoadButton.addEventListener('click', onLoadButton);\n\nasync function onSubmit(event) {\n  searchText = event.target.elements.searchInput.value.trim();\n  renderFunctions.hideLoadButton();\n  event.preventDefault();\n  renderFunctions.removeMarkup();\n  event.target.reset();\n\n  if (searchText) {\n    renderFunctions.setLoader();\n    pageNumber = 1;\n\n    try {\n      const data = await fetchServer(searchText, pageNumber, perPage);\n\n      if (data.hits.length === 0) {\n        renderFunctions.removeLoader();\n        iziToast.error({\n          timeout: 3000,\n          message:\n            'Sorry, there are no images matching your search query. Please try again!',\n          maxWidth: '432px',\n          messageColor: '#fff',\n          messageSize: '16px',\n          messageLineHeight: '1.5',\n          backgroundColor: '#ef4040',\n          position: 'topRight',\n          titleColor: '#fff',\n          titleSize: '16px',\n          titleLineHeight: '1.5',\n          iconUrl: svgError,\n        });\n        return;\n      } else {\n        maxPage = Math.ceil(data.totalHits / perPage);\n        renderFunctions.renderMarkup(data.hits);\n      }\n    } catch {\n      console.log('Mistake from server');\n    }\n\n    renderFunctions.removeLoader();\n    renderFunctions.loadButtonStatus(pageNumber, maxPage);\n  }\n}\n\nasync function onLoadButton() {\n  renderFunctions.setLoader();\n  pageNumber += 1;\n\n  const data = await fetchServer(searchText, pageNumber, perPage);\n\n  renderFunctions.renderMarkup(data.hits);\n  renderFunctions.removeLoader();\n  renderFunctions.loadButtonStatus(pageNumber, maxPage);\n  if (pageNumber >= maxPage) {\n    iziToast.info({\n      timeout: 3000,\n      message: \"We're sorry, but you've reached the end of search results.\",\n      position: 'topRight',\n    });\n  }\n  window.scrollBy({\n    behavior: 'smooth',\n    top:\n      2 *\n      document.querySelector('.gallery-item').getBoundingClientRect().height,\n  });\n}\n"],"names":["fetchServer","searchText","pageNumber","perPage","BASE_URL","END_POINT","API_KEY","url","params","axios","svgError","renderFunctions","elements","markup","image","webformatURL","largeImageURL","tags","likes","views","comments","downloads","lightbox","SimpleLightbox","maxPage","formSubmit","onSubmit","LoadButton","onLoadButton","event","data","iziToast"],"mappings":"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"}