{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nasync function fetchServer(searchText, pageNumber) {\n  const BASE_URL = 'https://pixabay.com';\n  const END_POINT = '/api/';\n  const API_KEY = '42307570-a64cb029cc8427df0f0b3ddcd';\n  const url = `${BASE_URL}${END_POINT}`;\n  const params = {\n    key: API_KEY,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    q: searchText,\n    per_page: 15,\n    page: pageNumber,\n  };\n  const res = await axios.get(url, { params });\n  return res.data;\n};\n\n\nexport default fetchServer;\n\n\n// const internetServerInfo = {\n//   BASE_URL: 'https://pixabay.com',\n//   END_POINT: '/api/',\n//   API_KEY: '42307570-a64cb029cc8427df0f0b3ddcd',\n//   constParameters: '&image_type=photo&orientation=horizontal&safesearch=true',\n// };\n\n// export default internetServerInfo;\n","// Описаний у документації\nimport SimpleLightbox from 'simplelightbox';\n// Додатковий імпорт стилів\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\n\nconst renderFunctions = {\n\n  renderMarkup(elements) {\n    const markup = elements\n      .map(image => {\n        const {\n          webformatURL,\n          largeImageURL,\n          tags,\n          likes,\n          views,\n          comments,\n          downloads,\n        } = image;\n        return `<li class=\"gallery-item\">\n<a class=\"gallery-link\" href=${largeImageURL}>\n<img class=\"gallery-image\" src=${webformatURL} alt=\"${tags}\" />\n</a><div class=\"options-div\"><div class=\"item-div\"><h4 class=\"item-div-name\">Likes</h4>\n  <p class=\"item-div-text\">${likes}</p></div><div class=\"item-div\"><h4 class=\"item-div-name\">Views</h4>\n  <p class=\"item-div-text\">${views}</p></div><div class=\"item-div\"><h4 class=\"item-div-name\">Comments</h4>\n  <p class=\"item-div-text\">${comments}</p></div><div class=\"item-div\"><h4 class=\"item-div-name\">Downloads</h4>\n  <p class=\"item-div-text\">${downloads}</p></div></div>\n</li>`;\n      })\n      .join('');\n\n    document.querySelector('.gallery').insertAdjacentHTML('beforeend', markup);\n\n    var lightbox = new SimpleLightbox('.gallery a', {\n      captionPosition: 'bottom',\n      captionsData: 'alt',\n      className: 'modal',\n      /* options */\n    });\n    lightbox.refresh();\n  },\n\n  // renderMarkup(markup) {\n  //     document.querySelector('.gallery').insertAdjacentHTML(\"beforeend\", markup);\n  // },\n\n  removeMarkup() {\n    document.querySelector('.gallery').innerHTML = '';\n  },\n\n  setLoader() {\n    document\n      .querySelector('.load-button')\n      .insertAdjacentHTML('afterend', `<span class=\"loader\"></span>`);\n  },\n\n  removeLoader() {\n    document.querySelector('.loader').remove();\n  },\n};\n\nexport default renderFunctions;\n","// import axios from 'axios';\n// import \"/src/js/render-functions\";\n\n\n\n// Описаний у документації\nimport iziToast from 'izitoast';\n// Додатковий імпорт стилів\nimport 'izitoast/dist/css/iziToast.min.css';\n\n// Описаний у документації\nimport SimpleLightbox from 'simplelightbox';\n// Додатковий імпорт стилів\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport fetchServer from './js/pixabay-api';\n\n\nimport svgError from '/img/bi_x-octagon.svg';\n\n\nimport renderFunctions from './js/render-functions';\n\nconst formSubmit = document.querySelector('.form');\nformSubmit.addEventListener('submit', onSubmit);\nconst LoadButton = document.querySelector('.load-button');\nLoadButton.addEventListener(\"click\", onLoadButton);\nlet searchText;\nlet pageNumber;\n\n// var lightbox = new SimpleLightbox('.gallery a', {\n//   captionPosition: 'bottom',\n//   captionsData: 'alt',\n//   className: 'modal',\n//   /* options */\n// });\n// lightbox.refresh();\n\n\n\n\nasync function onSubmit(event) {\n  \n  event.preventDefault();\n  renderFunctions.removeMarkup();\n  searchText = event.target.elements.searchInput.value.trim();\n  event.target.reset();\n\n  if (searchText) {\n    renderFunctions.setLoader();\n\n    pageNumber = 1;\n\n    const data = await fetchServer(searchText, pageNumber);\n    renderFunctions.renderMarkup(data.hits);\n\n      // const markup = renderFunctions.madeElementsMarkup(data.hits);\n      // renderFunctions.renderMarkup(markup);\n      \n\n\n//     const { BASE_URL, END_POINT, API_KEY, constParameters } =\n//       internetServerInfo;\n//     const url = `${BASE_URL}${END_POINT}?key=${API_KEY}&q=${searchText}${constParameters}`;\n\n//     fetch(url)\n//       .then(response => response.json())\n//       .then(array => {\n//         if (array.hits.length === 0) {\n//           iziToast.error({\n//             timeout: 3000,\n//             message:\n//               'Sorry, there are no images matching your search query. Please try again!',\n//             maxWidth: '432px',\n//             messageColor: '#fff',\n//             messageSize: '16px',\n//             messageLineHeight: '1.5',\n//             backgroundColor: '#ef4040',\n//             position: 'topRight',\n//             titleColor: '#fff',\n//             titleSize: '16px',\n//             titleLineHeight: '1.5',\n//             iconUrl: svgError,\n//           });\n//           return;\n//         } else {\n//           const markup = array.hits\n//             .map(image => {\n//               const {\n//                 webformatURL,\n//                 largeImageURL,\n//                 tags,\n//                 likes,\n//                 views,\n//                 comments,\n//                 downloads,\n//               } = image;\n//               return `<li class=\"gallery-item\">\n// <a class=\"gallery-link\" href=${largeImageURL}>\n// <img class=\"gallery-image\" src=${webformatURL} alt=\"${tags}\" />\n// </a><div class=\"options-div\"><div class=\"item-div\"><h4 class=\"item-div-name\">Likes</h4>\n//   <p class=\"item-div-text\">${likes}</p></div><div class=\"item-div\"><h4 class=\"item-div-name\">Views</h4>\n//   <p class=\"item-div-text\">${views}</p></div><div class=\"item-div\"><h4 class=\"item-div-name\">Comments</h4>\n//   <p class=\"item-div-text\">${comments}</p></div><div class=\"item-div\"><h4 class=\"item-div-name\">Downloads</h4>\n//   <p class=\"item-div-text\">${downloads}</p></div></div>\n// </li>`;\n//             })\n//             .join('');\n\n//           renderFunctions.renderMarkup(markup);\n\n\n\n\n    //       var lightbox = new SimpleLightbox('.gallery a', {\n    //         captionPosition: 'bottom',\n    //         captionsData: 'alt',\n    //         className: 'modal',\n    //         /* options */\n    //       });\n    // lightbox.refresh();\n    \n\n      //   }\n      // })\n      // .catch(() => {\n      //   console.log('Mistake from server');\n      // });\n\n    // setTimeout(() => {\n    //   renderFunctions.removeLoader();\n    // }, 1000);\n  }\n}\n\nasync function onLoadButton(event) {\n  // console.log(searchText);\n  \n\n  pageNumber += 1;\n\n      const data = await fetchServer(searchText, pageNumber);\n  const markup = renderFunctions.renderMarkup(data.hits);\n  \n  // renderFunctions.renderMarkup(markup);\n  \n  // var lightbox = new SimpleLightbox('.gallery a', {\n  //   captionPosition: 'bottom',\n  //   captionsData: 'alt',\n  //   className: 'modal',\n  //   /* options */\n  // });\n  // lightbox.refresh();\n\n};\n"],"names":["fetchServer","searchText","pageNumber","BASE_URL","END_POINT","API_KEY","url","params","axios","renderFunctions","elements","markup","image","webformatURL","largeImageURL","tags","likes","views","comments","downloads","lightbox","SimpleLightbox","formSubmit","onSubmit","LoadButton","onLoadButton","event","data"],"mappings":"6vBAEA,eAAeA,EAAYC,EAAYC,EAAY,CACjD,MAAMC,EAAW,sBACXC,EAAY,QACZC,EAAU,qCACVC,EAAM,GAAGH,CAAQ,GAAGC,CAAS,GAC7BG,EAAS,CACb,IAAKF,EACL,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,EAAGJ,EACH,SAAU,GACV,KAAMC,CACV,EAEE,OADY,MAAMM,EAAM,IAAIF,EAAK,CAAE,OAAAC,CAAM,CAAE,GAChC,IACb,CCZA,MAAME,EAAkB,CAEtB,aAAaC,EAAU,CACrB,MAAMC,EAASD,EACZ,IAAIE,GAAS,CACZ,KAAM,CACJ,aAAAC,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACD,EAAGP,EACJ,MAAO;AAAA,+BACgBE,CAAa;AAAA,iCACXD,CAAY,SAASE,CAAI;AAAA;AAAA,6BAE7BC,CAAK;AAAA,6BACLC,CAAK;AAAA,6BACLC,CAAQ;AAAA,6BACRC,CAAS;AAAA,MAEtC,CAAO,EACA,KAAK,EAAE,EAEV,SAAS,cAAc,UAAU,EAAE,mBAAmB,YAAaR,CAAM,EAEzE,IAAIS,EAAW,IAAIC,EAAe,aAAc,CAC9C,gBAAiB,SACjB,aAAc,MACd,UAAW,OAEjB,CAAK,EACDD,EAAS,QAAO,CACjB,EAMD,cAAe,CACb,SAAS,cAAc,UAAU,EAAE,UAAY,EAChD,EAED,WAAY,CACV,SACG,cAAc,cAAc,EAC5B,mBAAmB,WAAY,8BAA8B,CACjE,EAED,cAAe,CACb,SAAS,cAAc,SAAS,EAAE,OAAM,CACzC,CACH,ECrCME,EAAa,SAAS,cAAc,OAAO,EACjDA,EAAW,iBAAiB,SAAUC,CAAQ,EAC9C,MAAMC,EAAa,SAAS,cAAc,cAAc,EACxDA,EAAW,iBAAiB,QAASC,CAAY,EACjD,IAAIxB,EACAC,EAaJ,eAAeqB,EAASG,EAAO,CAO7B,GALAA,EAAM,eAAc,EACpBjB,EAAgB,aAAY,EAC5BR,EAAayB,EAAM,OAAO,SAAS,YAAY,MAAM,OACrDA,EAAM,OAAO,QAETzB,EAAY,CACdQ,EAAgB,UAAS,EAEzBP,EAAa,EAEb,MAAMyB,EAAO,MAAM3B,EAAYC,EAAYC,CAAU,EACrDO,EAAgB,aAAakB,EAAK,IAAI,CA8EvC,CACH,CAEA,eAAeF,EAAaC,EAAO,CAIjCxB,GAAc,EAEV,MAAMyB,EAAO,MAAM3B,EAAYC,EAAYC,CAAU,EAC1CO,EAAgB,aAAakB,EAAK,IAAI,CAYvD"}